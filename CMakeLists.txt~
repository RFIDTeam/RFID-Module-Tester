cmake_minimum_required(VERSION 2.8)

PROJECT(CheckMyPassport)

SET(APPLICATION_NAME "FormAnalyser")

# Get header files
file(
    GLOB_RECURSE
    HEADER_FILES
    include/*.h
)

# Get source files
file(
    GLOB_RECURSE
    SOURCE_FILES
    src/*.cpp
)

list(APPEND ALL_FILES
  ${HEADER_FILES}
  ${SOURCE_FILES}
)

include_directories(
	${CMAKE_HOME_DIRECTORY}/include
	${CMAKE_CURRENT_SOURCE_DIR}/include
	${CMAKE_CURRENT_BINARY_DIR}
	${GTK_DIR_INCLUDE}
	${LIBXML2_INCLUDE_DIR}
)

ADD_EXECUTABLE(
  # set as Windows in properties VS2010 if " ${CMAKE_PROJECT_NAME} WIN32 "
  ${APPLICATION_NAME}
  ${ALL_FILES}
)

TARGET_LINK_LIBRARIES(
  ${APPLICATION_NAME}
  ${OpenCV_LIBS}
)

# post-build copy for win32
if(WIN32 AND NOT MINGW)
	add_custom_command( TARGET ${APPLICATION_NAME} PRE_BUILD
		COMMAND if not exist .\\bin mkdir .\\bin )
	add_custom_command( TARGET ${APPLICATION_NAME} POST_BUILD
		COMMAND copy \"$(TargetPath)\" .\\bin )
endif(WIN32 AND NOT MINGW)

install(TARGETS ${APPLICATION_NAME}
	RUNTIME DESTINATION bin
	CONFIGURATIONS All
)
